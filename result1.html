<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:title" content="CHICHI119">
  <meta property="og:description" content="ìœ¡ê³„ ê´€ë ¨ ë‹¤ì–‘í•œ ê³„ì‚°í”„ë¡œê·¸ë¨ ì œê³µ">
  <meta property="og:url" content="chichi119.netlify.app">
  <meta property="og:type" content="website">
  <meta property="og:image" content="/img/CHICHI119.png">
  <link rel="stylesheet" href="/css/normalize.css" />
  <link rel="stylesheet" href="/css/sanitize.css" />
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="apple-touch-icon" href="/img/icon-512.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/icon-512.png">
  <link rel="manifest" href="/manifest.json">
  <title>ìœ¡ê³„ì‚¬ìœ¡ì— í•„ìš”í•œ ì¹œêµ¬</title>
</head>
<body>
  <div class="body_wrapper">
    <section class="section section_main">
      <ul class="mainmenu_list">
        <li class="mainmenu_li">
          <button id="menu_calc" class="btn btn_main">
            <img src="/img/calculator.svg" alt="calculator" loading="lazy" />
            <p>
              ì‚¬ìœ¡ì„±ì 
              <span class="word_break"> </span>
              <span class="word_keep">ê³„ì‚°ê¸°</span>
            </p>
          </button>
        </li>
        <li class="mainmenu_li">
          <button id="menu_part" class="btn btn_main">
            <img src="/img/partition.svg" alt="partition" loading="lazy" />
            <p>
              ì…ì¶”ë¶„í• 
              <span class="word_break"> </span>
              <span class="word_keep">ê³„ì‚°ê¸°</span>
            </p>
          </button>
        </li>
        <li class="mainmenu_li">
          <button id="menu_feed" class="btn btn_main">
            <img src="/img/feedamount.svg" alt="chicken" loading="lazy" />
            <p>
              ì¼ì¼ì„­ì·¨
              <span class="word_break"> </span>
              <span class="word_keep">ê³„ì‚°ê¸°</span>
            </p>
          </button>
        </li>
      </ul>
    </section>
    <section class="section section_mid">
      <div class="form">
        <div class="share-menu">
          <div id="share_result_title">ê²°ê³¼ë³´ë‚´ê¸°</div>
          <div id="share_result_btn1">
            <button class="share-button" onclick="shareEmail()">
              <img src="/img/email.svg" alt="ë©”ì¼ ì•„ì´ì½˜">
              <span>ì´ë©”ì¼</span>
            </button>
          </div>
          <div id="share_result_btn2">
            <button class="share-button" onclick="shareSMS()">
              <img src="/img/sms.svg" alt="ë¬¸ì ì•„ì´ì½˜">
              <span>ë¬¸ì</span>
            </button>
          </div>
        </div>
        <ul class="result_list">
          <li><span class="result_key">ì‚¬ìœ¡ì¼ìˆ˜(ì¼)</span><span id="day" class="result_value"></span></li>
          <li><span class="result_key">ì…ì¶”ìˆ˜ìˆ˜(ìˆ˜)</span><span id="in_count" class="result_value"></span></li>
          <li><span class="result_key">ì¶œí•˜ìˆ˜ìˆ˜(ìˆ˜)</span><span id="out_count" class="result_value"></span></li>
          <li><span class="result_key">ì¶œí•˜ì´ì¤‘ëŸ‰(kg)</span><span id="total_weight" class="result_value"></span></li>
          <li><span class="result_key">ì´ì‚¬ë£ŒëŸ‰(kg)</span><span id="feed_amount" class="result_value"></span></li>
          <li><span class="result_key">í‰ê· ì²´ì¤‘(kg)</span><span id="average_weight" class="result_value"></span></li>
          <li><span class="result_key">ì‚¬ë£Œíš¨ìœ¨</span><span id="feed_efficiency" class="result_value"></span></li>
          <li><span class="result_key">ìƒì‚°ì§€ìˆ˜</span><span id="product_index" class="result_value"></span></li>
          <li><span class="result_key">ìœ¡ì„±ìœ¨(%)</span><span id="upbringing_rate" class="result_value"></span></li>
        </ul>
      </div>
    </section>
    <section class="section section_bottom">
      <div class="footer_wrapper">
        <div>ê°œë°œ: ê¹€ë¯¼í™</div>
        <div><img src="./img/chicken.svg" id="favicon"/></div>
        <div>ë¬¸ì˜: suwonchkmh@naver.com</div>
      </div>
    </section>
  </div>
  <script src="./script.js"></script>
  <script>
    // METHOD START
    // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ìˆëŠ” ì•„ì´í…œì„ "ì•„ì´í…œëª…"ì„ ì…ë ¥í•˜ì—¬ êº¼ë‚´ì˜´
    function parseItem(itemName) {
      const response = localStorage.getItem(itemName);
      const parseData = JSON.parse(response);
      if (!parseData) return alert("ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
      return parseData;
    }
    // ì›í•˜ëŠ” í˜•íƒœë¡œ ì†Œìˆ˜ì  ì •ë¦¬
    function customMakeNum(day, in_count, out_count, total_weight, feed_amount) {
      const ubbringingDay = parseFloat(day);
      const inCount = parseFloat(in_count);
      const outCount = parseFloat(out_count);
      const totalWeight = parseFloat(total_weight);
      const feedAmount = parseFloat(feed_amount);
      const averageWeight = (totalWeight / outCount).toFixed(3);
      const feedEfficiency = (feedAmount / totalWeight).toFixed(3);
      const upbringingRate = ((outCount / inCount) * 100).toFixed(1);
      const productIndex = ((upbringingRate * averageWeight) / (ubbringingDay * feedEfficiency) * 100).toFixed(2);
      return {ubbringingDay, inCount, outCount, totalWeight, feedAmount, averageWeight, feedEfficiency, upbringingRate, productIndex};
    }
    //METHOD END
    // í˜ì´ì§€ê°€ ë¡œë”©ë ë•Œ, localStorageì— ìˆëŠ” ë³€ìˆ˜ê°’ë“¤ì„ ê°€ì ¸ì™€ì„œ ì‚¬ìš©
    // document.addEventListener("DOMContentLoaded", () => {
    //   const parseData = parseItem("data");
    //   const {day, in_count, out_count, total_weight, feed_amount } = parseData;
    //   const {ubbringingDay, inCount, outCount, totalWeight, feedAmount, averageWeight, feedEfficiency, upbringingRate, productIndex} =
    //     customMakeNum(day, in_count, out_count, total_weight, feed_amount);
      
    //   if (!(ubbringingDay && inCount && outCount && totalWeight && feedAmount && averageWeight && feedEfficiency && upbringingRate && productIndex)) return alert("ëˆ„ë½ëœ ê°’ì´ ìˆìŠµë‹ˆë‹¤. ê³„ì‚°ì„ ì™„ë£Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");

    //   document.getElementById("day").innerText = ubbringingDay;
    //   document.getElementById("in_count").innerText = inCount.toLocaleString();
    //   document.getElementById("out_count").innerText = outCount.toLocaleString();
    //   document.getElementById("total_weight").innerText = totalWeight.toLocaleString();
    //   document.getElementById("feed_amount").innerText = feedAmount.toLocaleString();
    //   document.getElementById("average_weight").innerText = averageWeight;
    //   document.getElementById("feed_efficiency").innerText = feedEfficiency;
    //   document.getElementById("product_index").innerText = productIndex;
    //   document.getElementById("upbringing_rate").innerText = upbringingRate;
    // });

    const parseData = parseItem("data");
    const {day, in_count, out_count, total_weight, feed_amount } = parseData;
    const {ubbringingDay, inCount, outCount, totalWeight, feedAmount, averageWeight, feedEfficiency, upbringingRate, productIndex} =
      customMakeNum(day, in_count, out_count, total_weight, feed_amount);

    document.getElementById("day").innerText = ubbringingDay;
    document.getElementById("in_count").innerText = inCount.toLocaleString();
    document.getElementById("out_count").innerText = outCount.toLocaleString();
    document.getElementById("total_weight").innerText = totalWeight.toLocaleString();
    document.getElementById("feed_amount").innerText = feedAmount.toLocaleString();
    document.getElementById("average_weight").innerText = averageWeight;
    document.getElementById("feed_efficiency").innerText = feedEfficiency;
    document.getElementById("product_index").innerText = productIndex;
    document.getElementById("upbringing_rate").innerText = upbringingRate;

    const resultText = [
      `ğŸ¯ì‚¬ìœ¡ì¼ìˆ˜: ${ubbringingDay}ì¼`,
      `ğŸ¯ì…ì¶”ìˆ˜ìˆ˜: ${inCount.toLocaleString()}ìˆ˜`,
      `ğŸ¯ì¶œí•˜ìˆ˜ìˆ˜: ${outCount.toLocaleString()}ìˆ˜`,
      `ğŸ¯ì¶œí•˜ì¤‘ëŸ‰: ${totalWeight.toLocaleString()}kg`,
      `ğŸ¯ì´ì‚¬ë£ŒëŸ‰: ${feedAmount.toLocaleString()}kg`,
      `ğŸ¯í‰ê· ì²´ì¤‘: ${averageWeight}kg`,
      `ğŸ¯ì‚¬ë£Œíš¨ìœ¨: ${feedEfficiency}`,
      `ğŸ¯ìƒì‚°ì§€ìˆ˜: ${productIndex}`,
      `ğŸ¯ìœ¡ ì„± ìœ¨: ${upbringingRate}%`,
      "ğŸ‘‰ ê³„ì‚°í•˜ëŸ¬ê°€ê¸°: https://chichi119.netlify.app"
    ].join("\n");
    function shareEmail() {
      const subject = encodeURIComponent("ì‚¬ìœ¡ì„±ì  ê³„ì‚°ê²°ê³¼");
      const body = encodeURIComponent(resultText);
      window.location.href = `mailto:?subject=${subject}&body=${body}`;
    }
    function shareSMS() {
      const body = encodeURIComponent(resultText);
      window.location.href = `sms:?body=${body}`;
    }
  </script>
</body>
</html>

